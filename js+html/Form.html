<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>img</title>
</head>
<body>
<form action="" method="post" onsubmit="return eg.regCheck();">
  <input type="hidden" name="" id="errnum" value="0"/>
  账户：<input type="text" name="" id="userid"/><br/><br/>
  密码：<input type="text" name="" id="userpwd"/><br/><br/>
  确认：<input type="text" name="" id="userpwd2"/><br/><br/>
  性别：<input type="radio" name="sex" value="1" checked="checked"/>男
  <input type="radio" name="sex" value="2" />女 <br/><br/>
  年龄：<select name="" id="age">
            <option value="0" selected="selected">请选择年龄段</option>
            <option value="1">18岁以下</option>
            <option value="2">18-24岁</option>
            <option value="3">24-30岁</option>
            <option value="4">30-35岁</option>
            <option value="5">35岁以上</option>
        </select><br/><br/>
  爱好:
  <input type="checkbox" name="like" value="1" class="like"/>上网
  <input type="checkbox" name="like" value="2" class="like"/>逛街
  <input type="checkbox" name="like" value="3" class="like"/>看电影
  <input type="checkbox" name="like" value="4" class="like"/>其他
  <br/><br/>
  简介： <textarea name="" id="about" cols="15" rows="3"></textarea>
  <br/><br/>
  <input type="submit" value="注册" id="regBtn"/>
  <input type="button" value="解锁" onclick="eg.unlock()" style="display:none;" id="regUnlock"/>
</form>
<script>
  var eg={};
  eg.$=function(id){
    return document.getElementById(id);
  }
  eg.getElementsByClassName=function(className,element){
    if(document.getElementsByClassName){
      return (element||document).getElementsByClassName(className);
    }
    var childern=document.getElementsByTagName("*");
    var arr=[];
    for(var i=0;i<childern.length;i++){
      var child=childern[i];
      var classNames=child.className.split(" ");
      for(var j=0;j<classNames.length;j++){
        if(className==classNames[j]){
          arr.push(child);
        }
      }
    }
    return arr;
  }
  eg.regCheck=function(){
    var uid=eg.$("userid");
    var upwd=eg.$("userpwd");
    var upwd2=eg.$("userpwd2");
    if(uid.value==""){
      alert("账户名不能为空");
      uid.focus();
      eg.err();
      return false;
    }
    if(upwd.value==""){
      alert("密码不能为空！");
      upwd.focus();
      eg.err();
      return false;
    }
    if(upwd.value!=upwd2.value){
      alert("两次输入的密码不同！")
      upwd2.focus();
      eg.err();
      return false;
    }
   var about=eg.$("about");
    if(about.value.length>60){
      alert("简介太长！");
      eg.err();
      about.focus();
      return false;
    }
    var age=eg.$("age");
    if(age.value==0){
      alert("请选择年龄段！");
      age.focus();
      eg.arr();
      return false;
    }
    var likes=document.getElementsByClassName("like");
    var likeNum=0;
    for(var i=0;i<likes.length;i++){
      if(likes[i].checked){
        linkNum++
      }
    }
    if(likeNum==0){
      alert("请至少选择一个爱好！");
      eg.err();
      return false;
    }
    return true;
  }
  eg.err=function(){
    var el=eg.$("errnum");
    var old=el.value;
    el.value=parseInt(old)+1;
    eg.lock();
  };
  eg.lock=function(){
    var err=eg.$("errnum");
    if(parseInt(err.value)>2){
      eg.$("regBtn").disabled=true;
      eg.$("regUnlock").style.display="block";
    }
  };
  eg.unlock=function(){
    eg.$("regBtn").disabled=false;
    eg.$("regUnlock").style.display="none";
  }

</script>
</body>
</html>